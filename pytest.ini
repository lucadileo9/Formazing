[pytest]
minversion = 6.0
addopts = -ra -q --tb=short
testpaths = tests

# Markers per categorizzare i test
markers =
    real_telegram: test che inviano messaggi reali su Telegram (richiede conferma)
    unit: test unitari veloci senza dipendenze esterne
    notion: test specifici per moduli NotionService
    integration: test di integrazione che usano più componenti
    e2e: test end-to-end con dati reali e servizi esterni
    mock_only: test che usano solo mock (nessun servizio reale)
    slow: test che richiedono più tempo per completare

# Per default escludi test che inviano messaggi reali
# Uso: pytest (esegue solo test sicuri)
# Uso: pytest -m "real_telegram" (esegue solo test reali)  
# Uso: pytest -m "not real_telegram" (escludi test reali)
; addopts = -m "not real_telegram"

# Configurazione asyncio
asyncio_mode = auto

# Output più dettagliato per debug
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Ignora warning specifici
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore:.*telegram.*:UserWarning